/*!
 * jQuery RMC Slider (Beta Version)
 * Original author: Gustavo Sales (https://github.com/hebsix)
 * Version: 0.5
 * 
 * Aditional Plugins:
 *      Required if using jQuery Animation: jQuery Easing (By gdsmith, https://github.com/gdsmith/jquery.easing, thanks :D)
 * 
 * Logs:
 *      0.1: The build with basic resources
 *      0.2: Fixed the transitions performance
 *      0.3: Fixed layers' bugs on change slide
 *      0.4: Fixed jQuery Animations
 *      0.5: Fixed mobile settings
 */
(function(n,t,i,r){function o(t,i){this.element=t;this.options=n.extend({},e,i);this._defaults=e;this._name=u;this.initStructure=n(this.element).html();this.class={slides:"."+this.options.prefix+"-slides",slide:"."+this.options.prefix+"-slide",bg:"."+this.options.prefix+"-bg",layer:"."+this.options.prefix+"-layer",dots:"."+this.options.prefix+"-dots",dot:"."+this.options.prefix+"-dot",container:"."+this.options.prefix+"-container"};navigator.userAgent.toLowerCase().indexOf("msie 9.0")!=-1&&(this.options.cssTransitions=!1);this.interval=null;this.options.cssTransitions&&(this.options.easing=timing[this.options.easing]);this.init();this.events()}var u="rmcSlider",f=["","-webkit-","-moz-","-o-","-ms-"],timing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e={width:1132,height:558,fullwidth:!1,prefix:"rmc",speed:500,dots:null,startIndex:0,autoplay:7e3,easing:"easeInCubic",cssTransitions:!0};o.prototype={init:function(){var i=this,t=n(this.element).find(this.class.slide).eq(this.options.startIndex);this.renderSlider();this.hasDots()&&this.renderDots();this.animateLayers(t);this.autoPlay()},events:function(){var i=this;n(t).resize(function(){i.options.startIndex=i.currentIndex();i.destroy();i.init()})},renderSlider:function(){var i=n(this.element),t={overflow:"hidden"};t.width=this.options.fullwidth?"100%":this.options.width;t.height=this.isMobile("480")?this.options.height-this.options.height*.25:this.options.height;i.css(t);this.renderSlides()},renderSlides:function(){var l=n(this.element),o=l.find(this.class.slide),a=this.fullwidthValue(),c=n(t).width(),i={width:this.options.width,height:this.options.height},s,h,u,f,r,e;for(this.options.width>c&&(i.width=c-30),s={width:"100%",overflow:"hidden"},h={width:i.width,height:"100%",position:"absolute",top:0,left:"50%",marginLeft:-(i.width/2)},this.isMobile("480")?(s.height=i.height-i.height*.25,h.height=i.height-i.height*.25):(s.height=i.height,h.height=i.height),o.css(s).wrapAll('<div class="'+this.class.slides.replace(".","")+'"><\/div>').find(this.class.container).css(h),u=0;u<o.length;u++)f=o.eq(u),r=f.find(this.class.bg),this.options.cssTransitions?f.css(this.transform("translate",{x:f.width()*(u-this.options.startIndex)})):f.css(this.position(f.width()*(u-this.options.startIndex))),r.length>0&&(e=r.data("src"),this.isMobile("320")?e=r.data("320-src"):this.isMobile("480")?e=r.data("480-src"):this.isMobile("768")?e=r.data("768-src"):this.isMobile("1024")&&(e=r.data("1024-src")),r.attr("src",e));o.eq(this.options.startIndex).addClass("current");this.renderLayers()},renderLayers:function(){for(var i,e=n(this.element).find(this.class.layer),f=0;f<e.length;f++){var t=e.eq(f),o=t.css("transform"),i=t.position(),u=t.data("position");u!=r&&(i=u["1200"],this.isMobile("320")?i=u["320"]:this.isMobile("480")?i=u["480"]:this.isMobile("768")?i=u["768"]:this.isMobile("1024")&&(i=u["1024"]),t.css({top:i[0],left:i[1]}));t.css({opacity:0});o!="matrix(1, 0, 0, 1, 0, 0)"?(t.css(this.removeTransition()).css("transform","matrix(1, 0, 0, 1, 0, 0)"),i=t.position(),t.css("transform",o),t.css(this.addTransition())):i=t.position();console.log(t.css("top"),t[0]);t.data("left",i.left).data("top",i.top)}},renderDots:function(){var r=this,i,t;for(n(this.element).append('<div class="'+this.class.dots.replace(".","")+'"><\/div>'),i=n(this.element).find(this.class.dots),t=0;t<this.count();t++)i.append('<div class="'+this.class.dot.replace(".","")+(t==this.options.startIndex?" active":"")+'"><\/div>');n(this.element).find(this.class.dot).on("click",function(){r.goTo(n(this).index())})},currentIndex:function(){return n(this.element).find(this.class.slide+".current").index()},count:function(){return n(this.element).find(this.class.slide).length},hasDots:function(){return this.options.dots!=null},fullwidthValue:function(){return n(this.element).outerWidth(!0)},goTo:function(t){var u,i,r;this.callback();var o=this,f=n(this.element),e=f.find(this.class.slide);for(this.options.cssTransitions&&e.css(this.addTransition()),u=0;u<this.count();u++)i=e.eq(u),r=i.width()*(u-t),i.removeClass("current"),this.options.cssTransitions?(r==0&&i.addClass("current"),i.css(this.transform("translate",{x:r}))):r==0?i.stop().animate({left:r},this.options.speed,this.options.easing,function(){var t=n(this);t.addClass("current");o.prepareSlideTransition(t)}):i.stop().animate({left:r},this.options.speed,this.options.easing);this.hasDots()&&f.find(this.class.dot).eq(t).addClass("active").siblings().removeClass("active");this.autoPlay()},next:function(){var n=this.currentIndex()+1;n==this.count()&&(n=0);this.goTo(n)},prev:function(){var n=this.currentIndex()-1;n==-1&&(n=this.count()-1);this.goTo(n)},destroy:function(){n(this.element).html(this.initStructure).removeAttr("style")},autoPlay:function(){if(this.options.autoplay){var n=this;clearInterval(this.interval);this.interval=setTimeout(function(){n.next()},this.options.autoplay)}},callback:function(){var t=this,i=n(this.element).find(this.class.slide);i.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){var i=n(this);t.prepareSlideTransition(i);i.unbind()})},prepareSlideTransition:function(t){var i=n(this.element).find(this.class.slide),r=t.index(),u=this.currentIndex();r==u&&(i.find(this.class.layer).css(this.removeTransition()).css({opacity:0}),this.animateLayers(t))},animateLayers:function($slide){var self=this;setTimeout(function(){function left(n){return $layer.position().left-n}function right(n){return $layer.position().left+n}function top(n){return $layer.position().top-n}function bottom(n){return $layer.position().top+n}function scale(n){return self.options.cssTransitions?{value:n}:n*100+"%"}var $layers=$slide.find(self.class.layer),originalPos=[],i,$layer,effect,top;for(self.options.cssTransitions&&$layers.css(self.removeTransition()),$layers.css({opacity:0}),i=0;i<$layers.length;i++)if($layer=$layers.eq(i),effect=$layer.data("effect")||"fade()",$layer.data("valign-center")?(top=$layer.data("top")-$layer.outerHeight(!0)/2,$layer.css({top:top}),originalPos.push({left:$layer.data("left"),top:top})):originalPos.push({left:$layer.data("left"),top:$layer.data("top")}),self.options.cssTransitions)switch(effect.split("(")[0]){case"left":case"right":$layer.css({left:eval(effect)});break;case"top":case"bottom":$layer.css({top:eval(effect)});break;case"scale":$layer.css(self.transform("scale",eval(effect)))}else switch(effect.split("(")[0]){case"left":case"right":$layer.css({left:eval(effect)});break;case"top":case"bottom":$layer.css({top:eval(effect)});break;case"scale":$layer.css({zoom:eval(effect)})}setTimeout(function(){for(var t=0;t<$layers.length;t++){var n=$layers.eq(t),f=n.data("effect")||"fade()",r=n.data("duration")||800,u=n.data("delay")||0,i=n.data("ease")||"easeOutQuad";if(self.options.cssTransitions){i=timing[i];n.css(self.addTransition("all",r,i,u)).css({opacity:1});switch(f.split("(")[0]){case"left":case"right":n.css({left:originalPos[t].left});break;case"top":case"bottom":n.css({top:originalPos[t].top});break;case"scale":n.css(self.transform("scale",{value:1}))}}else switch(f.split("(")[0]){case"left":case"right":n.delay(u).animate({opacity:1,left:originalPos[t].left},r,i);break;case"top":case"bottom":n.delay(u).animate({opacity:1,top:originalPos[t].top},r,i);break;case"scale":n.delay(u).animate({opacity:1,zoom:"100%"},r,i)}}})},300)},transform:function(n,t,i){var u="",f;i!=r&&i.css("transform")!="none"&&(u+=i.css("transform"));switch(n){case"translate":i==r?(t.x==r&&t.x==0,t.y==r&&(t.y=0)):(f=i.position(),t.x==r&&(t.x=f.left),t.y==r&&(t.y=f.top));u+=" translate(#x#px, #y#px)".replace("#x#",t.x).replace("#y#",t.y);break;case"perspective":u+=" perspective(#value#px)".replace("#value#",t.value);break;case"scale":u+=" scale(#value#)".replace("#value#",t.value)}if(u!="")return this.applyCssMotors("transform",u)},position:function(n,t){return t==r&&(t=0),{left:n,top:t}},addTransition:function(n,t,i,u){return n==r&&(n="all"),t==r&&(t=this.options.speed),i==r&&(i=this.options.easing),u==r&&(u=0),this.applyCssMotors("transition","#property# #duration#ms #easing#  #delay#ms".replace("#property#",n).replace("#duration#",t).replace("#easing#",i).replace("#delay#",u))},removeTransition:function(){return this.applyCssMotors("transition","none")},applyCssMotors:function(n,t){for(var r={},i=0;i<f.length;i++)r[f[i]+n]=t;return r},isMobile:function(i){var f=n(t).width(),u=/iPhone|iPad|Android|Windows Phone|Nokia|BB/.test(navigator.userAgent);return i!=r?f<{"320":480,"480":768,"768":1024,"1024":1200}[i]&&u:u}};n.fn[u]=function(t){return this.each(function(){n.data(this,"plugin_"+u)||n.data(this,"plugin_"+u,new o(this,t))})}})(jQuery,window,document);
//# sourceMappingURL=jquery-rmc-slider.min.js.map
